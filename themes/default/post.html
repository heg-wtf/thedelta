<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ post.title }} - {{ settings.blog_title }}</title>
    <meta name="description" content="{{ post.description if post.description else settings.blog_desc }}">
    <meta name="keywords" content="{% if tag_list %}{{ tag_list|join(', ') }}, {% endif %}technology, innovation, web development">
    <meta name="author" content="{{ settings.author }}">
    <meta name="publish_date" content="{{ post.created_at }}">
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    <link rel="manifest" href="/assets/site.webmanifest">
    <link rel="shortcut icon" href="/assets/favicon.ico">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="{{ post.title }}">
    <meta property="og:description" content="{{ post.description if post.description else settings.blog_desc }}">
    <meta property="og:site_name" content="{{ settings.blog_title }}">
    {% if post.featured_image %}
    <meta property="og:image" content="{{ post.featured_image }}">
    {% else %}
    <meta property="og:image" content="{{ settings.site_url }}/assets/thumbnail.png">
    {% endif %}
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ post.title }}">
    <meta name="twitter:description" content="{{ post.description if post.description else settings.blog_desc }}">
    {% if post.featured_image %}
    <meta name="twitter:image" content="{{ post.featured_image }}">
    {% else %}
    <meta name="twitter:image" content="{{ settings.site_url }}/assets/thumbnail.png">
    {% endif %}
    
    <!-- Article specific -->
    <meta property="article:published_time" content="{{ post.created_at }}">
    {% if tag_list %}
    {% for tag in tag_list %}
    <meta property="article:tag" content="{{ tag }}">
    {% endfor %}
    {% endif %}
    
    <!-- Additional SEO -->
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    
    <!-- Sitemap -->
    <link rel="sitemap" type="application/xml" title="Sitemap" href="{{ settings.site_url }}/sitemap.xml">
    
    <style>
        :root {
            color-scheme: light;
            --fc-yellow: #ffd600;
            --fc-black: #0f0f0f;
            --fc-text: #151515;
            --fc-muted: #505050;
            --fc-border: #d8d8d8;
            --fc-surface: #ffffff;
            --fc-background: #f6f6f6;
            --body-font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
            --display-font: -apple-system, BlinkMacSystemFont, "SF Pro Display", system-ui, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--body-font);
            line-height: 1.6;
            background: var(--fc-background);
            color: var(--fc-text);
            min-height: 100vh;
            padding: 0 1.5rem 4rem;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        a:hover {
            color: var(--fc-yellow);
        }

        .page {
            max-width: 820px;
            margin: 0 auto;
        }

        .masthead {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            padding: 2.75rem 0 1.5rem;
            border-bottom: 2px solid var(--fc-black);
            margin-bottom: 2.5rem;
        }

        .brand {
            font-family: var(--display-font);
            font-size: clamp(1.8rem, 4vw, 2.4rem);
            font-weight: 800;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            line-height: 1;
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
        }

        .brand::after {
            content: '';
            display: inline-block;
            width: clamp(28px, 4vw, 36px);
            height: 8px;
            background: var(--fc-yellow);
        }

        .masthead-contact {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.55rem 1.2rem;
            border: 2px solid var(--fc-black);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            background: var(--fc-yellow);
            color: var(--fc-black);
            transition: background 0.2s ease, color 0.2s ease;
        }

        .masthead-contact:hover {
            background: var(--fc-black);
            color: #fff;
        }

        .article-header {
            margin-bottom: 3rem;
        }

        .post-title {
            font-family: var(--display-font);
            font-size: clamp(2.4rem, 5vw, 3.6rem);
            line-height: 1.1;
            margin-bottom: 1.5rem;
            font-weight: 800;
        }

        .post-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
            font-size: 0.8rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: var(--fc-muted);
            margin-bottom: 1.2rem;
        }

        .tag-list {
            list-style: none;
            display: flex;
            gap: 0.6rem;
            flex-wrap: wrap;
        }

        .tag-item {
            background: var(--fc-yellow);
            color: var(--fc-black);
            padding: 0.35rem 0.9rem;
            font-size: 0.7rem;
            letter-spacing: 0.16em;
            text-transform: uppercase;
            font-weight: 600;
            border: 2px solid var(--fc-black);
        }

        article {
            background: var(--fc-surface);
            padding: clamp(2rem, 5vw, 3.5rem);
            border: 2px solid var(--fc-black);
            box-shadow: 12px 12px 0 0 var(--fc-yellow);
            margin-bottom: 3rem;
        }

        .content {
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .content h1,
        .content h2,
        .content h3 {
            font-family: var(--display-font);
            margin-top: 2.5rem;
            margin-bottom: 1.2rem;
            color: var(--fc-black);
            font-weight: 700;
            line-height: 1.25;
        }

        .content h1 {
            font-size: 2.2rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--fc-yellow);
        }

        .content h2 {
            font-size: 1.8rem;
            padding-left: 1rem;
            border-left: 4px solid var(--fc-yellow);
        }

        .content h3 {
            font-size: 1.4rem;
        }

        .content p {
            margin-bottom: 1.5rem;
        }

        .content ul,
        .content ol {
            margin-left: 2rem;
            margin-bottom: 1.5rem;
        }

        .content li {
            margin-bottom: 0.5rem;
        }

        .content code {
            background: #fff3cd;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 0.9em;
            border: 1px solid #ffe69c;
        }

        .content pre {
            background: var(--fc-black);
            color: #f8f8f2;
            padding: 1.8rem;
            border-radius: 0;
            overflow-x: auto;
            margin: 2rem 0;
            border: 2px solid var(--fc-black);
            box-shadow: 6px 6px 0 0 var(--fc-yellow);
        }

        .content pre code {
            background: none;
            padding: 0;
            color: inherit;
            border: none;
        }

        .content blockquote {
            border-left: 6px solid var(--fc-yellow);
            background: var(--fc-surface);
            padding: 1.5rem 2rem;
            margin: 2rem 0;
            color: var(--fc-text);
            font-style: italic;
            position: relative;
        }

        .content blockquote strong {
            color: var(--fc-black);
            font-style: normal;
        }

        .content img {
            max-width: 100%;
            height: auto;
            margin: 2rem 0;
            border: 2px solid var(--fc-black);
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            border: 2px solid var(--fc-black);
        }

        .content th,
        .content td {
            border: 1px solid var(--fc-border);
            padding: 1rem;
            text-align: left;
        }

        .content th {
            background: var(--fc-yellow);
            color: var(--fc-black);
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.1em;
        }

        .content tr:nth-child(even) {
            background: var(--fc-background);
        }

        .content hr {
            border: none;
            border-top: 2px solid var(--fc-black);
            margin: 3rem 0;
        }

        .content strong {
            font-weight: 700;
            color: var(--fc-black);
        }

        .content em {
            font-style: italic;
        }

        .author-section {
            background: var(--fc-surface);
            border: 2px solid var(--fc-black);
            box-shadow: 8px 8px 0 0 var(--fc-yellow);
            padding: 2rem;
            margin: 2rem 0;
            display: flex;
            align-items: flex-start;
            gap: 1.5rem;
        }

        .author-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--fc-black);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .author-info {
            flex: 1;
        }

        .author-name {
            font-family: var(--display-font);
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-decoration: underline;
        }

        .author-description {
            font-size: 0.9rem;
            line-height: 1.5;
            color: var(--fc-text);
            margin-top: 0.5rem;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.9rem 1.8rem;
            background: var(--fc-yellow);
            color: var(--fc-black);
            border: 2px solid var(--fc-black);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-weight: 600;
            transition: background 0.2s ease, color 0.2s ease;
        }

        .back-link:hover {
            background: var(--fc-black);
            color: #fff;
        }

        .site-footer {
            margin-top: 4rem;
            padding-top: 2.5rem;
            border-top: 2px solid var(--fc-black);
            font-size: 0.85rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            text-align: center;
            color: var(--fc-muted);
        }

        @media (max-width: 640px) {
            body {
                padding: 0 1rem 3rem;
            }

            .masthead {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .masthead-contact {
                padding: 0.5rem 1rem;
            }

            article {
                padding: 1.8rem 1.6rem;
                box-shadow: 8px 8px 0 0 var(--fc-yellow);
            }

            .content pre {
                padding: 1.2rem;
                box-shadow: 4px 4px 0 0 var(--fc-yellow);
            }

            .content h1 {
                font-size: 1.8rem;
            }

            .content h2 {
                font-size: 1.5rem;
            }

            .content h3 {
                font-size: 1.2rem;
            }

            .author-section {
                flex-direction: column;
                text-align: center;
                padding: 1.5rem;
                gap: 1rem;
            }

            .author-avatar {
                width: 60px;
                height: 60px;
                font-size: 1.2rem;
                margin: 0 auto;
            }

            .author-name {
                font-size: 1.1rem;
            }

            .author-description {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    {% set contact_email = settings.contact_email | default('hello@example.com', true) %}
    <div class="page">
        <header class="masthead">
            <a href="/" class="brand">THE DELTA</a>
            <a class="masthead-contact" href="mailto:{{ contact_email }}">Contact</a>
        </header>

        <div class="article-header">
            <h1 class="post-title">{{ post.title }}</h1>
            <div class="post-meta">
                <span>{{ post.created_at }}</span>
            </div>
            {% if tag_list %}
            <ul class="tag-list">
                {% for tag in tag_list %}
                <li class="tag-item">{{ tag }}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>

        <article>
            <div class="content">
                {{ post.html | safe }}
            </div>
        </article>

        <!-- Debug: Post object attributes -->
        <!-- {{ post }} -->
        
        {% if post.author %}
        <div class="author-section">
            <div class="author-avatar">
                {{ post.author[0] }}
            </div>
            <div class="author-info">
                <div class="author-name">{{ post.author }}</div>
                {% if post.author == 'Michael Harrison' %}
                <div class="author-description">
                    Fascinated by how emerging technologies reshape society, particularly AI and the future of work. Focuses on uncovering the reality behind startup culture, including failures, equity issues, and the gap between Silicon Valley's stated values and actual practices.
                </div>
                {% elif post.author == 'Carmen Rodriguez' %}
                <div class="author-description">
                    Passionate about power dynamics in capital allocation and how funding decisions shape innovation access. Explores alternative funding models, systemic barriers for underrepresented founders, and the tension between financial returns and social impact.
                </div>
                {% elif post.author == 'Terry' %}
                <div class="author-description">
                    Driven by understanding how macroeconomic forces impact everyday lives, especially wealth inequality and economic mobility. Examines the intersection of global trade, monetary policy, and geopolitics while seeking to explain complex market dynamics in human terms.
                </div>
                {% endif %}
            </div>
        </div>
        {% else %}
        <!-- Debug: No author found -->
        <div class="author-section">
            <div class="author-avatar">A</div>
            <div class="author-info">
                <div class="author-name">Anonymous</div>
            </div>
        </div>
        {% endif %}

        <a href="/index.html" class="back-link">← Back to Home</a>

        <footer class="site-footer">
            © The Delta
        </footer>
    </div>
</body>
</html>
